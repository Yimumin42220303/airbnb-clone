# 게스트 결제 UX/UI 개선 제안 (마이리얼트립·OTA 참고)

## 1. 참고 사례 정리

### 마이리얼트립 (한인민박·숙소)
- **메시지**: "간편하게 숙소를 예약", "검색하고 예약해보세요" — **단순한 한 줄 플로우** 강조
- **결제**: 5단계 중 "결제하기"를 **명확한 한 단계**로 노출 (항공 → 숙소 → 투어 → 특가 → **결제**)
- **한 곳에서 확인**: "내 여행 → 예약 상세 → 결제 정보"에서 결제·예약 상태 확인

### 부킹닷컴 (예약 요청형 숙소)
- **24시간 규칙**: 호스트가 24시간 내 승인/거절, 미응답 시 요청 만료
- **승인 후 결제**: 호스트 수락 후에 결제 진행 (가승인 옵션으로 카드 유효성 사전 확인)
- **메시지**: 예약 전 호스트와 채팅 가능

### 에어비앤비
- **선예약 후결제**: 예약 확정 시점에 청구 또는 체크인 72시간 전 자동 결제 등 **결제 시점이 명확**
- **가승인**: 요청만 보낸 경우 거절/취소 시 청구 없음 — "안전한 요청" 인지

---

## 2. 현재 플로우의 UX 문제점

| 문제 | 설명 |
|------|------|
| **진행 단계가 안 보임** | "지금 내가 ① 요청 ② 승인 ③ 결제 중 어디인지"가 한눈에 안 들어옴. 배지/문구만으로는 여정이 끊겨 보임 |
| **페이지가 쪼개져 있음** | 예약 완료(`/booking/complete`) · 내 예약(`/my-bookings`) · 결제(`/booking/[id]/pay`)가 따로 있어 "한 예약의 연속된 이야기"가 아님 |
| **결제 페이지가 맥락 없음** | 결제 화면만 보면 "어떤 예약의 마지막 단계인지" 연결이 약함. 같은 예약의 3단계라는 느낌이 없음 |
| **다음 할 일이 분산** | "결제하기"가 이메일·내 예약·complete 등 여러 곳에 있어, 어디로 가야 할지 헷갈릴 수 있음 |
| **24시간이 추상적** | "24시간 이내"만 있고, 남은 시간/마감일이 보이지 않으면 긴장감·신뢰가 떨어질 수 있음 |

---

## 3. 개선 방향 (목표 UX)

1. **한 여정으로 보이게**  
   예약 요청 → 호스트 승인 → 결제 완료를 **동일한 3단계 스텝**으로 모든 관련 화면에 표시.

2. **항상 "지금 할 일" 하나**  
   - 대기 중: "호스트 응답을 기다리는 중" + 내 예약에서 상태 확인  
   - 승인 후: "결제하기" (완료 페이지·내 예약·이메일에서 동일 CTA)

3. **결제 페이지에 맥락 부여**  
   결제 화면에도 **같은 3단계 스텝**(현재 3단계) + 숙소 요약을 넣어 "이 예약의 마지막 단계"임을 명확히.

4. **간단한 문구·한 페이지 집중**  
   마이리얼트립처럼 "간편하게" 느껴지도록, 단계별로 문구는 짧고, 한 화면에 "상태 + 다음 액션"이 같이 보이게.

---

## 4. 제안 플로우 (개선 후)

```
[숙소 상세] → [예약 확인] → [예약 요청] → [예약 완료 페이지] ← 여기가 "이 예약의 홈"
       ↑                          │
       │                    [진행 스텝 ① 완료 → ② 대기]
       │                          │
       │                    호스트 승인
       │                          ↓
       │                    [같은 예약 완료 페이지 또는 내 예약]
       │                    [진행 스텝 ①·② 완료 → ③ 결제하기]
       │                          │
       │                    [결제 페이지] ← 스텝 ①·②·③ + 숙소 요약 동일하게 표시
       │                          │
       └────────────────── 결제 완료 → 예약 확정 (내 예약 / 메시지)
```

### 4.1 공통 요소: 진행 스텝 (3단계)

**모든 관련 화면에서 동일한 스텝 표시**

| 단계 | 라벨 | 완료 조건 |
|------|------|-----------|
| 1 | 예약 요청 | 요청 전송 완료 |
| 2 | 호스트 승인 | status === "confirmed" |
| 3 | 결제 완료 | paymentStatus === "paid" |

- **표시 방식**: ① 예약 요청 — ② 호스트 승인 — ③ 결제 완료 (가로 스텝 또는 간단한 체크리스트)
- **현재 단계**만 강조(굵게/색상), 완료 단계는 체크 아이콘 등으로 표시

### 4.2 예약 완료 페이지 (`/booking/complete?id=...`)

- **상단**: 이 예약의 **진행 스텝** (현재 단계 강조)
- **본문**: 기존처럼 제목·설명·예약 요약 카드
- **대기 중(pending)**: "호스트가 24시간 이내에 검토해요" + **내 예약 보기** (주 CTA)
- **승인 후(confirmed, 미결제)**: "24시간 이내 결제해 주세요" 안내 + **결제하기** (주 CTA) + 내 예약 보기
- **결제 완료**: 예약 확정 메시지 + 메시지/내 예약 링크

→ **한 페이지에서 "지금 어디인지" + "지금 뭘 하면 되는지"** 가 동시에 보이도록.

### 4.3 결제 페이지 (`/booking/[id]/pay`)

- **상단**: **동일한 진행 스텝** (3단계 중 "결제 완료" 단계 활성)
- **바로 아래**: 숙소명·일정·인원·**결제 금액** (예약 완료 페이지와 같은 톤의 요약 카드)
- **설명**: "호스트가 승인한 예약입니다. 결제를 완료하면 예약이 확정됩니다."
- **결제 버튼**

→ 결제 페이지가 **같은 예약의 마지막 단계**로 인식되도록 맥락 유지.

### 4.4 내 예약 (`/my-bookings`)

- **결제 대기 예약**: 카드에 **미니 진행 표시** (선택) 예: "2/3 단계 · 결제 대기"
- **주 CTA**: "결제하기" 버튼 유지, 클릭 시 `/booking/[id]/pay` (해당 페이지에 스텝 표시로 맥락 제공)

### 4.5 (선택) 24시간 마감 표시

- 호스트 승인 시각이 있다면: "결제 마감: O월 O일 O시" 또는 "남은 시간 O시간" 표시
- 현재 DB에 승인 시각 필드가 없으면, `status`가 `confirmed`로 바뀐 `updatedAt`으로 대략 계산 가능 (구현 시 검토)

---

## 5. 구현 우선순위

| 순서 | 항목 | 효과 |
|------|------|------|
| 1 | **진행 스텝 공통 컴포넌트** | 모든 화면에서 동일한 3단계 표시 |
| 2 | **예약 완료 페이지에 스텝 추가** | "지금 어디인지" 즉시 파악 |
| 3 | **결제 페이지에 스텝 + 요약** | 결제가 "이 예약의 3단계"로 연결됨 |
| 4 | (선택) 내 예약 카드에 2/3 단계 표시 | 리스트에서도 진행도 인지 |
| 5 | (선택) 결제 마감일/남은 시간 | 24시간 압박을 구체적으로 전달 |

---

## 6. 요약

- **마이리얼트립**처럼 "간편한 한 흐름"을 위해 **진행 단계(스텝)**를 통일하고,
- **예약 완료 페이지**를 "이 예약의 상태 허브"로 두어,
- **결제 페이지**에서는 같은 스텝과 요약으로 "마지막 단계"임을 보여주면,

"호스트 승인 후에만 결제"라는 전제를 유지하면서도, 게스트가 **지금 어디에 있는지·뭘 해야 하는지**를 한눈에 알 수 있는 UX가 됩니다.

---

## 7. 구현 반영 (현재 코드)

| 항목 | 반영 내용 |
|------|-----------|
| 진행 스텝 컴포넌트 | `src/components/booking/BookingStepIndicator.tsx` — 3단계(예약 요청 / 호스트 승인 / 결제 완료), `getBookingStepState(status, paymentStatus)` 헬퍼 |
| 예약 완료 페이지 | 상단에 스텝 표시 (pending/confirmed일 때), 기존 문구·CTA 유지 |
| 결제 페이지 | 상단에 동일 스텝 표시 + 예약 요약 카드(숙소명·일정·금액)로 맥락 부여 |
| 내 예약 | 결제 대기/호스트 응답 대기 카드에 **compact** 스텝 표시 (예: "2/3 단계 · 결제 대기") |
