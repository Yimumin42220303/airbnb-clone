# 완성된 숙박 예약 플랫폼 기준 – 남은 작업

현재 구현된 기능을 기준으로, **실서비스 수준**으로 보완할 때 남은 작업을 우선순위·난이도와 함께 정리했습니다.

---

## 이미 구현된 것 (요약)

- 인증: NextAuth, 구글/카카오/네이버 OAuth
- 숙소: 등록/수정/삭제, 다중 이미지(URL), 편의시설, 날짜별 요금·예약 불가
- 검색: 지역·인원·가격·체크인/아웃·정렬
- 예약: 생성, 호스트 승인/거절/취소, 게스트 취소, 결제 상태(모의)
- 리뷰: 숙박 완료·어드민만 작성, 1인 1리뷰
- 메시지: 예약 단위 대화
- 위시리스트, 관리자(회원/숙소/예약/블로그), 블로그(SEO), sitemap/robots

---

## 1. 필수에 가까운 작업 (실서비스 전)

| 항목 | 현재 상태 | 남은 작업 | 비고 |
|------|-----------|-----------|------|
| **실제 결제** | 결제 버튼 클릭 시 DB만 `paymentStatus: paid` 로 변경 | PG 연동 (Stripe, 토스페이먼츠 등) – 결제 의도 생성·웹훅·환불 처리 | 수익화·신뢰에 필수 |
| **이미지 업로드** | 숙소/블로그 모두 **URL만** 입력 | 파일 업로드 API + 스토리지(S3, Cloudinary, Vercel Blob 등) 연동 | 호스트 UX·저작권 대응 |
| **이메일 알림** | 없음 | 예약 확정/취소/메시지 도착 등 트랜잭션 메일 (Resend, SendGrid, SES 등) | 이탈 방지·연락 보장 |

---

## 2. 서비스 품질·운영

| 항목 | 현재 상태 | 남은 작업 | 비고 |
|------|-----------|-----------|------|
| **취소/환불 자동화** | 취소 정책 문구만 있고, 취소 시 상태만 변경 | 취소 시점에 따른 환불률 계산 + 결제 PG 환불 API 호출 | 정책 문구와 실제 처리 일치 |
| **지도 표시** | 위치는 텍스트만, MapPin 아이콘만 사용 | 위도/경도 필드 추가 또는 주소→좌표 변환 후 지도 컴포넌트(카카오맵/구글맵 등) | 검색·신뢰도 향상 |
| **API 보안** | 인증·본인/호스트 체크 있음 | rate limiting, CORS·CSRF 정리, 민감 API 보강 | 남용·봇·보안 사고 방지 |
| **에러·로깅** | 클라이언트 alert, 서버 로그 산발적 | 구조화된 로깅(에러 추적 서비스 등), 사용자용 에러 메시지 정리 | 장애 대응·디버깅 |

---

## 3. 테스트·품질 보증

| 항목 | 현재 상태 | 남은 작업 | 비고 |
|------|-----------|-----------|------|
| **단위·통합 테스트** | 없음 | Jest/Vitest + API·lib 핵심 로직 테스트 | 리팩터 시 회귀 방지 |
| **E2E 테스트** | 없음 | Playwright 등으로 예약·결제·호스트 플로우 자동화 | 배포 전 회귀 검증 |
| **접근성(a11y)** | 일부 aria 등 사용 | 키보드·스크린리더 점검, 라벨·대비 등 정리 | 이용 범위 확대·규제 대응 |

---

## 4. 운영·분석·다국어

| 항목 | 현재 상태 | 남은 작업 | 비고 |
|------|-----------|-----------|------|
| **관리자 기능 보강** | 목록·링크 위주 | 숙소/회원 비공개·삭제·일괄 처리, 간단 통계 차트 | 운영 효율 |
| **분석** | 없음 | GA4 등 이벤트·전환 설정, 대시보드 연동(선택) | 전환·마케팅 |
| **다국어(i18n)** | 한국어만 | next-intl 등으로 EN/JP 추가 (도쿄민박 타깃에 유리) | 해외 유저 |
| **PWA** | 없음 | Service Worker, manifest, 오프라인/설치 경험(선택) | 모바일 재방문 |

---

## 5. 스키마·비즈니스 확장 (선택)

| 항목 | 현재 상태 | 남은 작업 | 비고 |
|------|-----------|-----------|------|
| **추가 요금** | 1박 단가만 | 청소비·추가 인원료 등 필드·UI·금액 계산 반영 | 실거래에 가깝게 |
| **쿠폰·프로모션** | 없음 | 할인 코드·기간별 할인 모델·결제 시 적용 로직 | 마케팅 |
| **호스트/게스트 검증** | 없음 | 본인 인증·연락처 인증 등(선택) | 신뢰·정책 대응 |
| **신고·검토** | 없음 | 숙소/리뷰 신고 → 관리자 검토 플로우 | 안전·커뮤니티 정책 |

---

## 우선순위 제안

1. **단기(실오픈 전)**  
   실제 결제 연동 → 이미지 업로드 → 이메일 알림 → 취소/환불 자동화 순으로 진행하면 서비스 신뢰도와 운영 부담을 동시에 잡기 좋습니다.

2. **중기**  
   지도, API 보안, 에러·로깅 정리 후, 테스트(E2E 위주) 도입.

3. **장기**  
   관리자 보강, 분석, 다국어, PWA, 추가 요금·쿠폰 등은 트래픽·운영 요구에 맞춰 단계적으로 추가.

이 문서는 `docs/유지보수-가이드.md`, `README.md`와 함께 프로젝트 방향과 남은 작업을 공유할 때 참고하면 됩니다.
