# 관리자 로그인 방법

관리자(admin)는 DB의 **User.role**이 `"admin"`인 계정입니다. 아래 두 가지 방식으로 관리자로 이용할 수 있습니다.

---

## 1. 실제 로그인으로 관리자 사용 (운영·테스트)

### 1단계: 일반 로그인

1. 브라우저에서 **로그인** → **Google로 로그인** 등으로 **본인 계정**(실제 Gmail 등)으로 로그인합니다.
2. 한 번 로그인하면 DB에 해당 이메일로 사용자가 생성됩니다.

### 2단계: DB에서 해당 사용자를 관리자로 변경

1. 터미널에서 실행:
   ```bash
   npm run db:studio
   ```
2. 브라우저에서 `http://localhost:5555` 접속 → **User** 테이블 클릭.
3. 방금 로그인한 **이메일**로 된 행을 찾습니다.
4. 해당 행의 **role** 값을 `user` → **`admin`** 으로 바꾼 뒤 저장합니다.

### 3단계: 세션 갱신

- **로그아웃** 후 다시 **로그인** 하면, 세션에 `role: "admin"`이 들어갑니다.
- 또는 개발 서버를 재시작한 뒤 페이지를 새로고침해도 됩니다.

이후 프로필 메뉴에 **관리자** 링크가 보이고, `/admin` 대시보드·숙소 등록(어드민 전용) 등을 사용할 수 있습니다.

---

## 2. 개발 시 로그인 생략 (DEV_SKIP_AUTH)

로컬에서 **로그인 없이** 관리자 페이지만 빠르게 쓰고 싶을 때:

1. 프로젝트 루트 **`.env`** 에 다음 한 줄을 추가합니다.
   ```env
   DEV_SKIP_AUTH=1
   ```
2. 개발 서버를 재시작합니다. (`npm run dev`)
3. 이제 로그인하지 않아도 **관리자로 인식**되어 `/admin`, `/host/listings/new` 등에 접근할 수 있습니다.

주의: **배포 환경에서는 반드시 제거**하세요. 보안상 위험합니다.

---

## 요약

| 방법 |何时 사용 | 관리자 되는 방법 |
|------|-----------|------------------|
| **실제 로그인** | 운영·실서비스·일반 테스트 | 1) Google 등으로 로그인 → 2) Prisma Studio에서 해당 User의 **role**을 `admin`으로 변경 → 3) 로그아웃 후 재로그인 |
| **DEV_SKIP_AUTH=1** | 로컬 개발만 | `.env`에 `DEV_SKIP_AUTH=1` 추가 후 서버 재시작 (로그인 불필요) |

시드에 있는 `admin@example.com`은 OAuth에서 그 이메일로 로그인할 수 없으므로, **실제 쓰는 계정**을 DB에서 `role: "admin"`으로 바꾸는 방식이 맞습니다.
