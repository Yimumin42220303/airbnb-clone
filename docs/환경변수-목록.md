# 환경 변수 목록

## 필수 (배포)

| 변수 | 설명 |
|------|------|
| `DATABASE_URL` | PostgreSQL 연결 문자열 (Neon 등) |
| `DIRECT_URL` | Prisma 마이그레이션용 직접 연결 |
| `NEXTAUTH_SECRET` | NextAuth 세션 암호화 (32자 이상) |
| `NEXTAUTH_URL` | 사이트 URL (예: https://tokyominbak.net) |

## OAuth (로그인)

| 변수 | 설명 |
|------|------|
| `GOOGLE_CLIENT_ID` | Google OAuth 클라이언트 ID |
| `GOOGLE_CLIENT_SECRET` | Google OAuth 시크릿 |
| `KAKAO_CLIENT_ID` | 카카오 REST API 키 |
| `KAKAO_CLIENT_SECRET` | 카카오 시크릿 |

## 이메일 (Resend)

| 변수 | 설명 |
|------|------|
| `RESEND_API_KEY` | Resend API 키 |
| `EMAIL_FROM` | 발신 이메일 (예: 도쿄민박 \<noreply@tokyominbak.net\>) |

## 결제 (포트원)

| 변수 | 설명 |
|------|------|
| `NEXT_PUBLIC_PORTONE_STORE_ID` | 포트원 스토어 ID (결제창용, Vercel Production 필수) |
| `NEXT_PUBLIC_PORTONE_CHANNEL_KEY` | 포트원 채널 키 (결제창용, Vercel Production 필수) |
| `PORTONE_API_SECRET` | 포트원 API Secret (결제 검증용, 서버 전용, Vercel Production 필수) |
| `NEXT_PUBLIC_PORTONE_TEST_MODE` | 테스트 모드 (true/false) |

**호스트 승인 후 게스트가 「결제하기」를 눌렀을 때 오류가 나면:**  
Vercel 환경 변수에 위 세 값(Store ID, Channel Key, API Secret)이 **모두** 설정돼 있는지 확인하고, 포트원 채널에 **실제 서비스 도메인**이 등록돼 있는지 확인하세요.

## 메시지 자동 번역 (DeepL, 선택)

| 변수 | 설명 |
|------|------|
| `DEEPL_AUTH_KEY` | DeepL API 인증 키. **Free 플랜**: [DeepL API](https://www.deepl.com/pro-api#developer)에서 발급(키가 `:fx`로 끝남, 월 50만 문자 무료). 미설정 시 자동 번역은 동작하지 않고 원문만 표시됨. |

## AI 추천 (OpenAI)

| 변수 | 설명 |
|------|------|
| `OPENAI_API_KEY` | OpenAI API 키 (gpt-4o-mini, AI 맞춤 숙소 추천용) |

## 이미지 (Cloudinary)

| 변수 | 설명 |
|------|------|
| `NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME` | Cloud name (클라이언트 업로드용) |
| `NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET` | Unsigned preset 이름 (클라이언트 업로드용) |
| `CLOUDINARY_CLOUD_NAME` | 서버 업로드용 (선택) |
| `CLOUDINARY_API_KEY` | 서버 업로드용 (선택) |
| `CLOUDINARY_API_SECRET` | 서버 업로드용 (선택) |

## Vercel 동기화

`.env.vercel.import`에 위 변수들을 설정한 뒤:

```bash
$env:VERCEL_TOKEN="토큰"; node scripts/vercel-env-api.js --redeploy
```
