# 모바일 최적화 – 예상 이슈 및 권장 사항

## 이미 잘 적용된 부분

- **viewport**: `device-width`, `initialScale=1`, `viewportFit=cover` 설정됨 (`layout.tsx`)
- **safe-area**: 헤더 `pt-[env(safe-area-inset-top)]`, 하단 nav `pb-[env(safe-area-inset-bottom)]`, 레이아웃 `pb-[calc(4rem+env(safe-area-inset-bottom))]` 적용
- **iOS 줌 방지**: `globals.css`에서 모바일(`max-width: 639px`) input/select/textarea `font-size: max(16px, 1rem)` 적용
- **터치 하이라이트**: `-webkit-tap-highlight-color: transparent` 적용
- **텍스트 크기 조정**: `-webkit-text-size-adjust: 100%`
- **터치 타겟**: 대부분 버튼/링크에 `min-h-[44px]` 사용 (Apple HIG 권장)
- **반응형 브레이크포인트**: `sm/md/lg/xl` 일관 사용, 헤더 spacer 게스트 176px/192px 등 모바일·데스크톱 분리

---

## 예상 이슈 및 대응

### 1. **좁은 화면(320px)에서 고정 너비 요소**

| 위치 | 내용 | 예상 이슈 | 권장 |
|------|------|-----------|------|
| `NotificationBell.tsx` | 드롭다운 `w-[320px]` | 320px 기기에서 화면 가득 참 또는 가로 스크롤 | 모바일에서 `max-w-[calc(100vw-2rem)]` 또는 `w-[320px] max-w-[calc(100vw-2rem)]` 적용 |
| `FramerGuestPicker.tsx` | 패널 `min-w-[320px] max-w-[400px]` | 320px에서 min-width로 인한 넘침 | `min-w-0 sm:min-w-[320px]` 또는 `max-w-[min(400px,calc(100vw-2rem))]` |
| `FramerDateRangePicker` | `min-w-[320px]` | 동일 | 위와 같이 뷰포트 기준 상한 적용 |

### 2. **하단 네비 레이블 가독성**

- **위치**: `BottomNav.tsx` – `text-[10px]`
- **이슈**: 10px는 작은 편이라 가독성·접근성 이슈 가능
- **권장**: `text-[10px]` → `text-[11px]` 또는 `text-xs`(12px), 필요 시 `leading-tight` 유지

### 3. **알림 드롭다운 위치(좌측 여백)**

- **위치**: `NotificationBell` – `absolute right-0`
- **이슈**: 작은 화면에서 오른쪽에 붙어서, safe-area나 여백이 없으면 가장자리에 딱 붙을 수 있음
- **권장**: 모바일에서 `right: 0` 대신 `left: 50%; transform: translateX(-50%);` 또는 `max-w-[calc(100vw-1rem)]` + 적당한 좌우 margin

### 4. **검색/날짜·인원 오버레이 세로 위치**

- **위치**: `HomeSearchBar`, `FramerGuestPicker`, `AIRecommendSection` – `pt-[184px] md:pt-[200px]`
- **이슈**: 헤더 높이가 디바이스/폰트/줌에 따라 달라지면 184px가 맞지 않아 겹치거나 빈 공간 생길 수 있음
- **권장**: 가능하면 헤더 높이를 CSS 변수나 JS로 공유해 오버레이 `top`/`padding-top`을 동일 값으로 사용. 또는 `pt-[12rem]` 등 상대 단위로 조정해 유연하게.

### 5. **테이블·가로 스크롤**

- **위치**: `AdminListingReviewsClient`, `admin/users`, `admin/bookings`, `HostCalendarView` 등 – `overflow-x-auto` 사용
- **상태**: 이미 가로 스크롤로 처리됨
- **권장**: 모바일에서 “가로로 스크롤 가능하다”는 힌트(예: 그림자, 화살표, “← 스와이프” 문구) 있으면 UX 개선

### 6. **숙소 상세 – 예약 카드**

- **위치**: `ListingDetailContent.tsx` – 예약 폼이 `lg:sticky lg:top-[200px]`
- **상태**: 모바일에서는 sticky 미적용으로 본문 흐름에 포함됨(적절함). 다만 날짜·인원 패널이 `overflow-visible`로 카드 밖으로 나갈 수 있음
- **권장**: 320px 등에서 패널이 화면 밖으로 나가지 않도록 `overflow-x: hidden`을 상위 컨테이너에 제한적으로 적용하거나, 패널 너비를 `min(100%, 320px)` 등으로 제한

### 7. **리스트/카드 그리드**

- **위치**: 검색/위시리스트 – `ListingCard`, 그리드 컬럼
- **상태**: `flex-shrink-0`, `sizes`로 이미지 반응형
- **권장**: 320px에서 카드가 1열로 깨지지 않는지, 이미지 비율·텍스트 줄바꿈만 한 번 확인

### 8. **폼 입력 필드**

- **위치**: `BookingConfirmContent` – 인원 +/- 버튼 `w-[72px]`, `EditListingForm` 등
- **상태**: 전역으로 input 16px 적용되어 iOS 줌은 완화됨
- **권장**: 숫자 입력 등 작은 터치 영역은 `min-h-[44px]` 확보

### 9. **이미지 갤러리·라이트박스**

- **위치**: `ListingImageGallery` – `pt-[72px] md:pt-[80px] pb-14`
- **이슈**: 노치/다이나믹 아일랜드 기기에서 상단이 가려질 수 있음
- **권장**: `pt-[max(72px, env(safe-area-inset-top) + 56px)]` 형태로 safe-area와 헤더 높이 반영

### 10. **성능·CLS**

- **이슈**: 헤더 높이(spacer)와 실제 고정 헤더 높이가 불일치하면 스크롤 시 콘텐츠가 “깜빡”하거나 CLS 발생 가능
- **권장**: spacer와 헤더 높이를 한 곳(상수 또는 CSS 변수)에서 관리

---

## 우선 적용 권장 순서

1. **좁은 화면(320px) 대응**: 알림 패널·게스트/날짜 피커 `max-w-[calc(100vw-2rem)]` 등 적용
2. **하단 네비 레이블**: `text-[10px]` → 11px/12px
3. **갤러리/오버레이 safe-area**: `ListingImageGallery`, 검색/날짜 오버레이 상단 여백에 `env(safe-area-inset-top)` 반영
4. **숙소 상세 예약 패널**: 모바일에서 패널이 화면 밖으로 나가지 않도록 overflow/너비 제한

---

## 테스트 권장 환경

- **뷰포트**: 320px, 375px, 390px, 414px
- **기기**: iOS Safari(노치/다이나믹 아일랜드), Android Chrome
- **확대**: 시스템 폰트 125% 등 접근성 확대 시 레이아웃·터치 영역 확인

이 문서는 현재 코드 기준으로 정리한 예상 이슈입니다. 실제 기기/뷰포트에서 한 번씩 확인한 뒤 필요한 부분만 적용하면 됩니다.
